<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Blackjack</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: radial-gradient(circle at top, rgb(255, 248, 229), rgb(255, 248, 229));
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }
    .table {
      background: rgb(119, 205, 226);
      border-radius: 16px;
      padding: 24px 28px 28px;
      width: 420px;
    }
    h1 {
      text-align: center;
      margin: 0 0 12px;
      letter-spacing: 1px;
    }
    .hand {
      margin: 16px 0;
    }
    .label {
      font-weight: 600;
      margin-bottom: 6px;
    }
    .cards {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    .card {
      width: 42px;
      height: 60px;
      background: #fff;
      color: #111;
      border-radius: 6px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-weight: 700;
      box-shadow: 0 4px 10px rgba(0,0,0,.25);
    }

    .top-link-blackjack {
      position: fixed;
      top: 10px;
      left: 10px;
      font-size: 14px;
      text-decoration: none;
      color: rgb(81,136, 150);
    }
    .controls {
      display: flex;
      gap: 10px;
      margin-top: 16px;
    }
    button {
      flex: 1;
      padding: 10px;
      border-radius: 8px;
      border: none;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
    }
    button:disabled {
      opacity: .5;
      cursor: not-allowed;
    }
    .hit { background: #ffd166; }
    .stand { background: #ef476f; color: #fff; }
    .new { background: #06d6a0; }
    .reset { background: #118ab2; color: #fff; }
    .status {
      text-align: center;
      margin-top: 12px;
      min-height: 22px;
      font-weight: 600;
    }
  </style>
</head>
<body>
  <a href="index.html" class="top-link-blackjack"><u>Home Page</u></a>
  <div class="table">
    <h1>BLACKJACK</h1>

    <div class="hand">
      <div class="label">Dealer</div>
      <div class="cards" id="dealerCards"></div>
      <div id="dealerTotal"></div>
    </div>

    <div class="hand">
      <div class="label">You</div>
      <div class="cards" id="playerCards"></div>
      <div id="playerTotal"></div>
    </div>

    <div class="controls">
      <input type="number" id="betInput" placeholder="Bet" min="1" style="flex:1;padding:10px;border-radius:8px;border:none;font-weight:600;" />
      <button class="hit" id="hitBtn">Hit</button>
      <button class="stand" id="standBtn">Stand</button>
      <button class="new" id="newBtn">New Game</button>
      <button class="reset" id="resetBtn" style="display:none;">Reset Game</button>
    </div>

    <div class="status" id="status"></div>
  </div>

  <script>
    const suits = ['♠','♥','♦','♣'];
    const values = ['A','2','3','4','5','6','7','8','9','10','J','Q','K'];

    let deck = [];
    let player = [];
    let dealer = [];
    let gameOver = false;

    const dealerCardsEl = document.getElementById('dealerCards');
    const playerCardsEl = document.getElementById('playerCards');
    const dealerTotalEl = document.getElementById('dealerTotal');
    const playerTotalEl = document.getElementById('playerTotal');
    const statusEl = document.getElementById('status');
    const hitBtn = document.getElementById('hitBtn');
    const standBtn = document.getElementById('standBtn');
    const newBtn = document.getElementById('newBtn');
    const resetBtn = document.getElementById('resetBtn');
    const betInput = document.getElementById('betInput');

    let points = 150;
    let bet = 0;

    function buildDeck() {
      deck = [];
      for (let s of suits) {
        for (let v of values) {
          deck.push({ value: v, suit: s });
        }
      }
    }

    function shuffle() {
      for (let i = deck.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [deck[i], deck[j]] = [deck[j], deck[i]];
      }
    }

    function deal() { return deck.pop(); }

    function handValue(hand) {
      let total = 0, aces = 0;
      for (let card of hand) {
        if (card.value === 'A') { aces++; total += 11; }
        else if (['K','Q','J'].includes(card.value)) total += 10;
        else total += parseInt(card.value);
      }
      while (total > 21 && aces > 0) { total -= 10; aces--; }
      return total;
    }

    function render() {
      dealerCardsEl.innerHTML = '';
      playerCardsEl.innerHTML = '';

      dealer.forEach((c,i)=>{
        const div=document.createElement('div');
        div.className='card';
        div.textContent = (!gameOver && i===0)? '?' : c.value+c.suit;
        dealerCardsEl.appendChild(div);
      });

      player.forEach(c=>{
        const div=document.createElement('div');
        div.className='card';
        div.textContent = c.value+c.suit;
        playerCardsEl.appendChild(div);
      });

      dealerTotalEl.textContent = gameOver ? `Total: ${handValue(dealer)}` : '';
      playerTotalEl.textContent = `Total: ${handValue(player)}`;
    }

    function endGame(msg,result='push') {
      if(result==='win') points+=bet;
      if(result==='lose') points-=bet;
      if(points<0) points=0;

      gameOver=true;

      if(points===0){
        statusEl.textContent='You lose — out of points.';
        hitBtn.disabled=true;
        standBtn.disabled=true;
        betInput.disabled=true;
        resetBtn.style.display='block';
        return;
      }

      statusEl.textContent=`${msg} | Points: ${points}`;
      hitBtn.disabled=true;
      standBtn.disabled=true;
      betInput.disabled=false;
      render();
    }

    function dealerTurn(){
      while(handValue(dealer)<17) dealer.push(deal());
      const p=handValue(player), d=handValue(dealer);
      if(d>21) endGame('Dealer busts. You win!','win');
      else if(d>p) endGame('Dealer wins.','lose');
      else if(d<p) endGame('You win!','win');
      else endGame('Push (tie).','push');
    }

    hitBtn.onclick=()=>{
      if(gameOver) return;
      player.push(deal());
      if(handValue(player)>21) endGame('You bust. Dealer wins.','lose');
      else render();
    };

    standBtn.onclick=()=>{ if(gameOver) return; dealerTurn(); };

    newBtn.onclick=start;

    resetBtn.onclick=()=>{
      points=150;
      betInput.value='';
      betInput.disabled=false;
      resetBtn.style.display='none';
      statusEl.textContent='Game reset. Points: 150';
    };

    function start(){
      bet=parseInt(betInput.value);
      if(!bet || bet<=0 || bet>points){
        statusEl.textContent=`Invalid bet. Points: ${points}`;
        hitBtn.disabled=true;
        standBtn.disabled=true;
        return;
      }
      buildDeck(); shuffle();
      player=[deal(),deal()];
      dealer=[deal(),deal()];
      gameOver=false;
      statusEl.textContent=`Bet: ${bet} | Points: ${points}`;
      hitBtn.disabled=false;
      standBtn.disabled=false;
      betInput.disabled=true;
      render();
    }

    start();
  </script>
</body>
</html>
